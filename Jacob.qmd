```{r}
library(ggplot2)
library(dplyr)
library(tidyverse)
#Read in inflation data 
Inflation <- read.csv("data/historicalinflationcalculator.csv") %>% 
  filter(Year != 2024)
```


```{r}
#Comparing Inflation over time by month

Inflation$Feb <- as.numeric(Inflation$Feb)


Inflation1 <- pivot_longer(Inflation, cols = -Year, names_to = "Month", values_to = "Rate")

Inflation1 <- Inflation1 %>% 
  filter(Month != "Ave")

# Define the order of months
month_order <- c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")

# Convert "Month" to factor with defined order
Inflation1$Month <- factor(Inflation1$Month, levels = month_order)


# Plotting
ggplot(Inflation1, aes(x = Year, y = Rate)) +
  geom_line() +
  facet_wrap(~ Month, scales = "free_y", ncol = 4) +
  labs(x = "Year", y = "Rate", title = "Rate by Month")
```

```{r}
#Average inflation rate per year through time 
ggplot(Inflation, aes(x=Year, y=Ave))+
  geom_col()
```

```{r}
#Read in data for apple
Apple <- read.csv("data/nasdaq_prices/stocks/AAPL.csv")

#Plot that shows open and closing prices as well as high and low
ggplot(Apple, aes(x=Date))+
  geom_linerange(aes(ymin=Low, ymax = High))
```



```{r}
library(tidyr)
library(stringr)
library(tidyverse)
library(dplyr)
```


```{r}
#Function to join two .csv files


stock_join <- function(csv1, csv2) {
  # Extract stock names from file paths
  stockName1 <- str_extract(csv1, "[^/]+(?=\\.csv$)")
  stockName2 <- str_extract(csv2, "[^/]+(?=\\.csv$)")
  
  # Read in stock .csv files
  Stock1 <- read.csv(csv1)
  Stock2 <- read.csv(csv2)
  
  # Add 'Company' column to each dataset
  Stock1$Company <- stockName1
  Stock2$Company <- stockName2
  
  # Pivot data longer for stock1
  Stock1_long <- pivot_longer(Stock1, 
                              cols = -c(Date, Company),  
                              names_to = "Variable", 
                              values_to = "Value")
  
  # Pivot data longer for stock2
  Stock2_long <- pivot_longer(Stock2, 
                              cols = -c(Date, Company),  
                              names_to = "Variable", 
                              values_to = "Value")
  
  # Join the two datasets by date and variable
  joined_data1 <- merge(Stock1_long, Stock2_long, by = c("Date", "Variable"), suffixes = c(paste0("_", stockName1), paste0("_", stockName2)))
  
  # Convert scientific notation to regular decimal notation for numeric columns
  numeric_cols <- grepl("^Value_", names(joined_data1))
  joined_data1[numeric_cols] <- lapply(joined_data1[numeric_cols], function(x) {
    if(is.numeric(x)) {
      format(x, scientific = FALSE)
    } else {
      x
    }
  })

  
  print(joined_data1)
}

```

```{r}
joined_data1<-stock_join("data/nasdaq_prices/stocks/AAPL.csv", "data/nasdaq_prices/stocks/MSFT.csv")
```


